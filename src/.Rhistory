# src/01_prep_data.R
# 1. Load Required Libraries
library(tidyverse)
library(knitr)
library(here)
# 2. Load Data
# Note: Path is relative to the project root directory where 'make' is executed.
data <- read_csv(here("data", "Mental_Health_Lifestyle_Dataset.csv"))
# 3. Data Cleaning / Renaming (Crucial for handling spaces in column names)
data <- data %>%
rename(
Exercise_Level = `Exercise Level`,
Diet_Type = `Diet Type`,
Sleep_Hours = `Sleep Hours`,
Stress_Level = `Stress Level`,
Mental_Health_Condition = `Mental Health Condition`,
Work_Hours = `Work Hours per Week`,
Screen_Time = `Screen Time per Day (Hours)`,
Social_Score = `Social Interaction Score`,
Happiness_Score = `Happiness Score`
# Note: 'Country', 'Age', 'Gender' are already clean
)
saveRDS(data, file = here("data", "processed_data.rds"))
# src/02_create_table.R
library(here)
library(tidyverse)
data <- readRDS(here("data", "processed_data.rds"))
# Summary statistics for numeric variables
num_summary <- data %>%
summarise(
Mean_Age = mean(Age, na.rm = TRUE),
SD_Age   = sd(Age, na.rm = TRUE),
Mean_Sleep = mean(Sleep_Hours, na.rm = TRUE),
SD_Sleep   = sd(Sleep_Hours, na.rm = TRUE),
Mean_WorkHrs = mean(Work_Hours, na.rm = TRUE),
SD_WorkHrs   = sd(Work_Hours, na.rm = TRUE)
)
# Distribution of stress levels
stress_dist <- data %>%
count(Stress_Level) %>%
mutate(Percent = round(n / sum(n) * 100, 1))
# Distribution of reported mental health conditions
mental_dist <- data %>%
count(Mental_Health_Condition) %>%
mutate(Percent = round(n / sum(n) * 100, 1))
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
# Load required libraries
library(here)
library(tidyverse)
library(knitr)
source(here("src", "01_prep_data.R"))
source(here("src", "02_create_table.R"))
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
# Load required libraries
library(here)
library(tidyverse)
library(knitr)
# Use knitr::kable to format the R data frame into a clean HTML table
kable(
num_summary,
caption = "Table 1: Summary Statistics of Numeric Variables (Age, Sleep, Work Hours)",
digits = 2 # Set number of decimal places for numeric columns
)
# Format the stress level frequency table
kable(
stress_dist,
caption = "Table 2: Distribution of Reported Stress Levels",
col.names = c("Stress Level", "Count (n)", "Percentage (%)") # Rename column headers for clarity
)
# Format the stress level frequency table
kable(
stress_dist,
caption = "Table 2: Distribution of Reported Stress Levels",
col.names = c("Stress Level", "Count (n)", "Percentage (%)") # Rename column headers for clarity
)
# Format the mental health condition frequency table
kable(
mental_dist,
caption = "Table 3: Distribution of Reported Mental Health Conditions",
col.names = c("Mental Health Condition", "Count (n)", "Percentage (%)")
)
source(here("src", "03_create_figure.R"))
# Embed the saved image file
knitr::include_graphics(here("output", "figure_1_gender.png"))
knitr::include_graphics(here("output", "figure_2_age.png"))
knitr::include_graphics(here("output", "figure_3_diet.png"))
# src/01_prep_data.R
# 1. Load Required Libraries
library(tidyverse)
library(knitr)
library(here)
# 2. Load Data
# Note: Path is relative to the project root directory where 'make' is executed.
data <- read_csv(here("data", "Mental_Health_Lifestyle_Dataset.csv"))
# 3. Data Cleaning / Renaming (Crucial for handling spaces in column names)
data <- data %>%
rename(
Exercise_Level = `Exercise Level`,
Diet_Type = `Diet Type`,
Sleep_Hours = `Sleep Hours`,
Stress_Level = `Stress Level`,
Mental_Health_Condition = `Mental Health Condition`,
Work_Hours = `Work Hours per Week`,
Screen_Time = `Screen Time per Day (Hours)`,
Social_Score = `Social Interaction Score`,
Happiness_Score = `Happiness Score`
# Note: 'Country', 'Age', 'Gender' are already clean
)
saveRDS(data, file = here("data", "processed_data.rds"))
# src/02_create_table.R
library(here)
library(tidyverse)
data <- readRDS(here("data", "processed_data.rds"))
# Summary statistics for numeric variables
num_summary <- data %>%
summarise(
Mean_Age = mean(Age, na.rm = TRUE),
SD_Age   = sd(Age, na.rm = TRUE),
Mean_Sleep = mean(Sleep_Hours, na.rm = TRUE),
SD_Sleep   = sd(Sleep_Hours, na.rm = TRUE),
Mean_WorkHrs = mean(Work_Hours, na.rm = TRUE),
SD_WorkHrs   = sd(Work_Hours, na.rm = TRUE)
)
# Distribution of stress levels
stress_dist <- data %>%
count(Stress_Level) %>%
mutate(Percent = round(n / sum(n) * 100, 1))
# Distribution of reported mental health conditions
mental_dist <- data %>%
count(Mental_Health_Condition) %>%
mutate(Percent = round(n / sum(n) * 100, 1))
# src/02_create_table.R
# Load required libraries
library(here)
library(tidyverse)
# Load the processed data file (assuming it was created by 01_prep_data.R)
data <- readRDS(here("data", "processed_data.rds"))
# Summary statistics for numeric variables
num_summary <- data %>%
summarise(
Mean_Age = mean(Age, na.rm = TRUE),
SD_Age   = sd(Age, na.rm = TRUE),
Mean_Sleep = mean(Sleep_Hours, na.rm = TRUE),
SD_Sleep   = sd(Sleep_Hours, na.rm = TRUE),
Mean_WorkHrs = mean(Work_Hours, na.rm = TRUE),
SD_WorkHrs   = sd(Work_Hours, na.rm = TRUE)
)
# Distribution of stress levels
stress_dist <- data %>%
count(Stress_Level) %>%
mutate(Percent = round(n / sum(n) * 100, 1))
# Distribution of reported mental health conditions
mental_dist <- data %>%
count(Mental_Health_Condition) %>%
mutate(Percent = round(n / sum(n) * 100, 1))
# src/03_create_figure.R
# Create the plots
library(tidyverse)
library(here)
data <- readRDS(here("data", "processed_data.rds"))
# 1. Gender distribution (Bar plot)
plot_gender <- ggplot(data, aes(x = Gender, fill = Gender)) +
geom_bar() +
labs(title = "Figure 1: Gender Distribution",
x = "Gender",
y = "Count") +
theme_minimal()
# 2. Age distribution (Histogram)
plot_age <- ggplot(data, aes(x = Age)) +
geom_histogram(binwidth = 5, fill = "steelblue", color = "white", alpha = 0.7) +
labs(title = "Figure 2: Age Distribution",
x = "Age",
y = "Frequency") +
theme_minimal()
# 3. Diet type distribution (Bar plot)
plot_diet <- ggplot(data, aes(x = Diet_Type)) +
geom_bar(fill = "skyblue", alpha = 0.8) +
labs(title = "Figure 3: Diet Type Distribution",
x = "Diet Type",
y = "Count") +
theme_minimal()
ggsave(here("output", "figure_1_gender.png"), plot = plot_gender, width = 6, height = 4)
ggsave(here("output", "figure_2_age.png"), plot = plot_age, width = 6, height = 4)
ggsave(here("output", "figure_3_diet.png"), plot = plot_diet, width = 6, height = 4)
